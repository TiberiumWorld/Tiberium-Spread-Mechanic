on_actions = {
    on_monthly = {
        effect = {
            # Grow
            if = {
                limit = {
                    any_owned_state = {
                        OR = { 
                            has_state_flag = tiberium_infestation_0_flag
                            has_state_flag = tiberium_infestation_1_flag
                            has_state_flag = tiberium_infestation_2_flag
                            has_state_flag = tiberium_infestation_3_flag
                        }
                    }
                }
                if = {
                    limit = { has_game_rule = { rule = tiberium_rule_growth option = LOW } }
                    random_list = {
                        2 = { country_event = {id = tiberium_grow.0 days = 1 } }
                        98 = { }
                    }
                }
                else_if = {
                    limit = { has_game_rule = { rule = tiberium_rule_growth option = NORMAL } }
                    random_list = {
                        7 = { country_event = {id = tiberium_grow.0 days = 1 } }
                        93 = { }
                    }
                }
                else_if = {
                    limit = { has_game_rule = { rule = tiberium_rule_growth option = HIGH } }
                    random_list = {
                        12 = { country_event = {id = tiberium_grow.0 days = 1 } }
                        88 = { }
                    }
                }
                else_if = {
                    limit = { has_game_rule = { rule = tiberium_rule_growth option = EXTREAM } }
                    random_list = {
                        19 = { country_event = {id = tiberium_grow.0 days = 1 } }
                        81 = { }
                    }
                }
            }

            # Spread
            if = {
                limit = {
                    any_owned_state = {
                        OR = { 
                            has_state_flag = tiberium_infestation_0_flag
                            has_state_flag = tiberium_infestation_1_flag
                            has_state_flag = tiberium_infestation_2_flag
                            has_state_flag = tiberium_infestation_3_flag
                            has_state_flag = tiberium_infestation_4_flag
                        }
                    }
                }
                if = {
                    limit = { has_game_rule = { rule = tiberium_rule_spread option = LOW } }
                    random_list = {
                        20 = { country_event = {id = tiberium_spread.0 days = 7 } }
                        20 = { }
                    }
                }
                else_if = {
                    limit = { has_game_rule = { rule = tiberium_rule_spread option = NORMAL } }
                    random_list = {
                        30 = { country_event = {id = tiberium_spread.0 days = 7 } }
                        70 = { }
                    }
                }
                else_if = {
                    limit = { has_game_rule = { rule = tiberium_rule_spread option = HIGH } }
                    random_list = {
                        40 = { country_event = {id = tiberium_spread.0 days = 7 } }
                        60 = { }
                    }
                }
                else_if = {
                    limit = { has_game_rule = { rule = tiberium_rule_spread option = EXTREAM } }
                    random_list = {
                        50 = { country_event = {id = tiberium_spread.0 days = 7 } }
                        50 = { }
                    }
                }
                
            }

            # Spread to us
            if = {
                limit = {
                    NOT = { has_country_flag = tiberium_infestation_in_country_flag }
                    any_owned_state = {
                        OR = { 
                            has_state_flag = tiberium_infestation_0_flag
                            has_state_flag = tiberium_infestation_1_flag
                            has_state_flag = tiberium_infestation_2_flag
                            has_state_flag = tiberium_infestation_3_flag
                            has_state_flag = tiberium_infestation_4_flag
                        }
                    }
                }
                country_event = {id = tiberium_spread.3 days = 9 }
            }

            # Entire nation infected
            if = {
                limit = {
                    NOT = { has_country_flag = tiberium_infestation_full_flag }
                    all_owned_state = {
                        OR = { 
                            has_state_flag = tiberium_infestation_3_flag
                            has_state_flag = tiberium_infestation_4_flag
                        }
                    }
                }
                country_event = {id = tiberium_spread.1 days = 7 }
            }
        }
    }

    on_startup = {
        effect = {
            if = { # Tiberium Startup
                limit = {
                    has_game_rule = { rule = tiberium_rule_init option = START }
                }
                162 = {
                    set_state_flag = init_tiberium_infestation_flag
                }
                ITA = {
                    news_event = { id = tiberium_init.0 days = 3 }
                }
            }
            else_if = {
                limit = {
                    has_game_rule = { rule = tiberium_rule_init option = RANDOM }
                }
                162 = {
                    set_state_flag = init_tiberium_infestation_flag
                }
                every_country = {
                    limit = { is_ai = no }
                    news_event = {
                        id = tiberium_init.0
                        days = 3
                        random_days = 9125
                        random = 48
                    }
                }
            }
        }
    }
}